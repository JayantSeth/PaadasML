name: Build
on:
  push:

jobs:
# Build job. Builds app for Android with Buildozer
  build-android:
     name: Build for Android
     runs-on: ubuntu-latest

     steps:
       - name: Checkout
         uses: actions/checkout@v2
         
       - name: Install PortAudio development libraries
         run: sudo apt-get install portaudio19-dev
         
       - name: Install python3 development libraries
         run: sudo apt-get install python3-dev

       - name: Build with Buildozer
         uses: ArtemSBulgakov/buildozer-action@v1
         id: buildozer
         with:
           workdir: .
           buildozer_version: stable

       - name: Upload artifacts
         uses: actions/upload-artifact@v2
         with:
           name: package
           path: ${{ steps.buildozer.outputs.filename }}
